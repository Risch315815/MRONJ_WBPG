<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Algorithm Direct</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { border: 1px solid #ccc; margin: 10px 0; padding: 15px; }
        .result { background-color: #f5f5f5; padding: 10px; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>Direct Algorithm Test</h1>
    <div id="results"></div>

    <script src="assets/js/mronj-references.js"></script>
    <script src="assets/js/mronj-risk-algorithm.js"></script>
    <script>
        const resultsDiv = document.getElementById('results');
        let html = '';

        try {
            const calculator = new MRONJRiskCalculator();
            html += '<div class="test-section">';
            html += '<h3>Algorithm Initialized Successfully</h3>';
            html += '</div>';

            // Test case: Osteoporosis + Denosumab + IV/SC
            const testData = {
                hasCancer: false,
                hasAntiresorptiveMed: true,
                drugName: 'Denosumab',
                administrationRoute: 'IV/SC'
            };

            html += '<div class="test-section">';
            html += '<h3>Test Case: Osteoporosis + Denosumab + IV/SC</h3>';
            html += '<pre>Input: ' + JSON.stringify(testData, null, 2) + '</pre>';

            // Test single treatment
            const singleResult = calculator.calculateRisk(testData, 'extraction');
            html += '<div class="result">';
            html += '<h4>Single Treatment (Extraction) Result:</h4>';
            html += '<pre>' + JSON.stringify(singleResult, null, 2) + '</pre>';
            html += '</div>';

            // Test all categories
            const allResults = calculator.calculateRisk(testData);
            html += '<div class="result">';
            html += '<h4>All Categories Result:</h4>';
            html += '<pre>' + JSON.stringify(allResults, null, 2) + '</pre>';
            html += '</div>';

            html += '</div>';

        } catch (error) {
            html += '<div class="test-section" style="background-color: #ffebee;">';
            html += '<h3>Error:</h3>';
            html += '<p>' + error.message + '</p>';
            html += '<pre>' + error.stack + '</pre>';
            html += '</div>';
        }

        resultsDiv.innerHTML = html;
    </script>
</body>
</html>
