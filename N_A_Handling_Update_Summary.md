# N/A 值處理更新總結

## 概述
根據您的要求，我已經將所有無法計算MRONJ發生率的類別從 "0" 更改為 "N/A"，並更新了相關的算法和顯示邏輯。

## 主要更改

### 1. 數據結構更新 (`assets/js/mronj-risk-algorithm.js`)

#### 更改的類別 (從 0 改為 'N/A'):
- **骨質疏鬆症**:
  - `bisphosphonate_Risedronate` (口服, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate_Ibandronate` (靜脈/皮下, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate_Clodronate` (口服, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate_Pamidronate` (靜脈/皮下, 侵入性治療): 0 → 'N/A'
  - `Romosuzumab` (靜脈/皮下, 侵入性治療): 0 → 'N/A'
  - `not_specific` (靜脈/皮下, 侵入性治療): 0 → 'N/A'

- **癌症**:
  - `none` (無藥物, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate` (靜脈/皮下, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate_Ibandronate` (未特定, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate_Clodronate` (未特定, 侵入性治療): 0 → 'N/A'
  - `bisphosphonate_Zoledronate` (未特定, 侵入性治療): 0 → 'N/A'

### 2. 算法邏輯更新

#### `getIncidenceRate()` 方法:
- 現在正確處理 'N/A' 值
- 當遇到 'N/A' 時直接返回 'N/A'
- 錯誤處理也返回 'N/A' 而不是預設值

#### `categorizeRisk()` 方法:
- 新增 'unknown' 風險類別處理 'N/A' 值
- 當發生率為 'N/A' 時返回 'unknown' 類別

#### `getRiskLevel()` 方法:
- 新增 'unknown' 類別對應中文 "資料不足"

#### `getRecommendation()` 方法:
- 新增 'unknown' 類別的建議:
  - 侵入性治療: "缺乏足夠資料進行風險評估。建議轉診至醫學中心進行專業評估，並密切追蹤。"
  - 非侵入性治療: "缺乏足夠資料進行風險評估。建議諮詢專業醫師並定期追蹤。"

### 3. 用戶介面更新

#### 風險評估頁面 (`risk-assessment.html`):
- 新增 "資料不足" 風險等級的樣式 (灰色)
- 當發生率為 'N/A' 時顯示 "資料不足" 而不是數值
- 更新 CSS 類別處理邏輯

#### 文獻參考頁面 (`reference-papers.html`):
- 當發生率為 'N/A' 時顯示 "資料不足" 而不是數值

#### 個別文獻頁面 (`reference-detail.html`):
- 當發生率為 'N/A' 時顯示 "資料不足" 而不是數值

#### 算法測試頁面 (`algorithm-test.html`):
- 新增測試案例驗證 'N/A' 值
- 更新測試邏輯以正確處理 'N/A' 比較
- 新增 Risedronate 和 Pamidronate 的 'N/A' 測試案例

### 4. 樣式更新

#### 新增 CSS 類別:
```css
.risk-badge.unknown-risk {
  background-color: #6c757d; /* 灰色 */
}
```

#### 列印樣式:
- 包含 'unknown-risk' 類別的列印樣式
- 確保列印時正確顯示顏色

## 功能特色

### 1. 清晰的資料不足指示
- 使用 "資料不足" 而不是 "0%" 來表示缺乏數據
- 灰色標籤清楚區分於其他風險等級

### 2. 適當的建議
- 為資料不足的情況提供專門的建議
- 建議轉診至醫學中心進行專業評估

### 3. 一致的用戶體驗
- 所有頁面都統一處理 'N/A' 值
- 視覺上清楚區分有數據和無數據的情況

## 測試驗證

### 新增測試案例:
1. **骨質疏鬆症 - 口服Risedronate (侵入性)**: 預期 'N/A'
2. **骨質疏鬆症 - 靜脈Pamidronate (侵入性)**: 預期 'N/A'

### 驗證邏輯:
- 正確識別 'N/A' 值
- 正確顯示 "資料不足" 風險等級
- 正確提供相應建議

## 影響範圍

### 正面影響:
1. **更準確的風險評估**: 不再將缺乏數據誤導為零風險
2. **更好的臨床決策**: 明確指出需要更多專業評估的情況
3. **透明的數據呈現**: 誠實地顯示數據限制

### 用戶體驗改善:
1. **清楚的視覺指示**: 灰色標籤清楚表示資料不足
2. **適當的建議**: 針對資料不足情況的專門建議
3. **一致的處理**: 所有頁面統一處理 'N/A' 值

這個更新確保了系統在面對缺乏足夠數據的情況時，能夠提供準確、透明且有用的信息給醫療專業人員和患者。

