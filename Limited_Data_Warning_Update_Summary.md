# 有限資料警告系統更新總結

## 概述
根據您的要求，我已經實施了兩個重要更新：

1. **修正 Risedronate 數據**: 將骨質疏鬆症口服 Risedronate 侵入性治療的發生率從 'N/A' 改為 0%（因為數據確實顯示沒有 MRONJ 發生）
2. **有限資料警告系統**: 為基於有限研究資料的發生率（標記為 **）添加警告提醒

## 主要更改

### 1. 數據修正

#### Risedronate 修正:
```javascript
// 之前: 'N/A' (錯誤)
bisphosphonate_Risedronate: {
  oral: { none: 0.13, YES: 'N/A' }
}

// 現在: 0 (正確)
bisphosphonate_Risedronate: {
  oral: { none: 0.13, YES: 0 }
}
```

### 2. 有限資料警告系統

#### 新增數據品質指標:
```javascript
this.limitedDataSources = {
  osteoporosis: {
    bisphosphonate_Alendronate: {
      oral: { YES: true }  // 4.97** - 有限資料
    },
    bisphosphonate_Ibandronate: {
      oral: { YES: true }  // 5** - 有限資料
    },
    bisphosphonate: {
      'IV/SC': { YES: true }  // 15.12** - 有限資料
    },
    bisphosphonate_Zoledronate: {
      'IV/SC': { YES: true }  // 15.12** - 有限資料
    }
  }
};
```

#### 標記的有限資料類別:
- **骨質疏鬆症 - 口服 Alendronate (侵入性)**: 4.97%**
- **骨質疏鬆症 - 口服 Ibandronate (侵入性)**: 5%**
- **骨質疏鬆症 - 靜脈/皮下雙磷酸鹽類 (侵入性)**: 15.12%**
- **骨質疏鬆症 - 靜脈/皮下 Zoledronate (侵入性)**: 15.12%**

### 3. 算法增強

#### 新增方法:
- `hasLimitedDataSources()`: 檢查特定組合是否有有限資料標記
- 更新 `calculateRisk()` 方法返回 `hasLimitedData` 標記

#### 風險評估結果現在包含:
```javascript
{
  incidenceRate: 4.97,
  hasLimitedData: true,  // 新增
  riskCategory: 'medium',
  // ... 其他屬性
}
```

### 4. 用戶介面更新

#### 風險評估頁面 (`risk-assessment.html`):
- **發生率顯示**: 有限資料的發生率會顯示 ** 標記
- **警告框**: 黃色警告框提醒用戶謹慎解讀結果
- **視覺提示**: 橙色 ** 標記清楚標示有限資料

#### 個別文獻頁面 (`reference-detail.html`):
- 同樣的 ** 標記和警告提醒
- 一致的用戶體驗

#### 算法測試頁面 (`algorithm-test.html`):
- 新增有限資料標記的測試驗證
- 顯示 ** 標記和警告信息
- 測試案例包含 Risedronate 0% 驗證

### 5. 視覺設計

#### 警告樣式:
```css
/* 有限資料標記 */
** (橙色, 粗體)

/* 警告框 */
background: #fff3cd;
border: 1px solid #ffeaa7;
color: #856404;
```

#### 警告訊息:
```
⚠️ 資料限制提醒: 此發生率基於有限的研究資料，建議謹慎解讀結果並諮詢專業醫師進行進一步評估。
```

### 6. 測試驗證

#### 新增測試案例:
1. **Risedronate 0% 驗證**: 確認顯示 0% 而不是 N/A
2. **有限資料標記驗證**: 確認 ** 標記正確顯示
3. **警告訊息驗證**: 確認警告框正確顯示

#### 測試邏輯:
- 驗證發生率計算正確性
- 驗證有限資料標記正確性
- 兩者都正確才算測試通過

## 功能特色

### 1. 準確的數據呈現
- Risedronate 正確顯示 0% 發生率
- 區分真正的零風險和資料不足

### 2. 透明的資料品質指示
- ** 標記清楚標示有限資料
- 警告訊息提醒用戶謹慎解讀

### 3. 一致的用戶體驗
- 所有頁面統一處理有限資料警告
- 視覺設計一致且清楚

### 4. 臨床決策支持
- 幫助醫療專業人員了解資料限制
- 建議進一步專業評估

## 影響範圍

### 正面影響:
1. **更準確的風險評估**: Risedronate 正確顯示零風險
2. **透明的資料品質**: 清楚標示資料限制
3. **更好的臨床決策**: 提醒謹慎解讀有限資料
4. **用戶信任**: 誠實地顯示資料限制

### 用戶體驗改善:
1. **清楚的視覺指示**: ** 標記和警告框
2. **適當的建議**: 針對有限資料的專門建議
3. **一致的處理**: 所有頁面統一處理有限資料

這個更新確保了系統在面對基於有限研究資料的發生率時，能夠提供準確、透明且有用的信息，幫助醫療專業人員做出更明智的臨床決策。

